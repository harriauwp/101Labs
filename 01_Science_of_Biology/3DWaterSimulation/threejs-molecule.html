<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Water Molecule Viewer</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        body { margin: 0; overflow: hidden; background: #000; }
        #info {
            position: absolute;
            top: 10px;
            left: 10px;
            color: white;
            background: rgba(0,0,0,0.5);
            padding: 10px;
            border-radius: 5px;
            font-family: Arial, sans-serif;
        }
        #controls {
            position: absolute;
            bottom: 10px;
            left: 10px;
            color: white;
            background: rgba(0,0,0,0.5);
            padding: 10px;
            border-radius: 5px;
            font-family: Arial, sans-serif;
        }
    </style>
</head>
<body>
    <div id="info">
        <h3>Water Molecule (H₂O)</h3>
        <p>Click and drag to rotate • Scroll to zoom</p>
    </div>
    
    <div id="controls">
        <button onclick="resetView()">Reset View</button>
        <button onclick="toggleRotation()">Toggle Rotation</button>
    </div>
    
    <script>
        let scene, camera, renderer;
        let molecule, autoRotate = false;
        
        // Initialize Three.js
        function init() {
            // Scene
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x000022);
            
            // Camera
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 15;
            
            // Renderer
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.body.appendChild(renderer.domElement);
            
            // Lighting
            const light = new THREE.DirectionalLight(0xffffff, 1);
            light.position.set(5, 5, 5);
            scene.add(light);
            
            const ambient = new THREE.AmbientLight(0x404040);
            scene.add(ambient);
            
            // Create water molecule
            createWaterMolecule();
            
            // Mouse controls
            let isDragging = false;
            let previousMousePosition = { x: 0, y: 0 };
            
            renderer.domElement.addEventListener('mousedown', () => isDragging = true);
            renderer.domElement.addEventListener('mouseup', () => isDragging = false);
            
            renderer.domElement.addEventListener('mousemove', (e) => {
                if (!isDragging) return;
                
                const deltaX = e.movementX;
                const deltaY = e.movementY;
                
                if (molecule) {
                    molecule.rotation.y += deltaX * 0.01;
                    molecule.rotation.x += deltaY * 0.01;
                }
            });
            
            // Zoom with scroll wheel
            renderer.domElement.addEventListener('wheel', (e) => {
                camera.position.z += e.deltaY * 0.01;
                camera.position.z = Math.max(5, Math.min(50, camera.position.z));
            });
            
            // Handle window resize
            window.addEventListener('resize', () => {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            });
            
            // Start animation
            animate();
        }
        
        function createWaterMolecule() {
            molecule = new THREE.Group();
            
            // Oxygen (red, larger)
            const oxygenGeo = new THREE.SphereGeometry(1, 32, 32);
            const oxygenMat = new THREE.MeshPhongMaterial({ color: 0xff4444 });
            const oxygen = new THREE.Mesh(oxygenGeo, oxygenMat);
            molecule.add(oxygen);
            
            // Hydrogens (white, smaller)
            const hydrogenGeo = new THREE.SphereGeometry(0.6, 32, 32);
            const hydrogenMat = new THREE.MeshPhongMaterial({ color: 0xffffff });
            
            const hydrogen1 = new THREE.Mesh(hydrogenGeo, hydrogenMat);
            hydrogen1.position.set(-0.8, 1.5, 0);
            molecule.add(hydrogen1);
            
            const hydrogen2 = new THREE.Mesh(hydrogenGeo, hydrogenMat);
            hydrogen2.position.set(0.8, 1.5, 0);
            molecule.add(hydrogen2);
            
            // Bonds
            const bondGeo = new THREE.CylinderGeometry(0.1, 0.1, 1.8);
            const bondMat = new THREE.MeshPhongMaterial({ color: 0xcccccc });
            
            const bond1 = new THREE.Mesh(bondGeo, bondMat);
            bond1.position.set(-0.4, 0.75, 0);
            bond1.rotation.z = Math.PI / 6;
            molecule.add(bond1);
            
            const bond2 = new THREE.Mesh(bondGeo, bondMat);
            bond2.position.set(0.4, 0.75, 0);
            bond2.rotation.z = -Math.PI / 6;
            molecule.add(bond2);
            
            scene.add(molecule);
        }
        
        function resetView() {
            camera.position.set(0, 0, 15);
            if (molecule) {
                molecule.rotation.set(0, 0, 0);
            }
        }
        
        function toggleRotation() {
            autoRotate = !autoRotate;
            document.querySelector('#controls button:nth-child(2)').textContent = 
                autoRotate ? 'Stop Rotation' : 'Toggle Rotation';
        }
        
        function animate() {
            requestAnimationFrame(animate);
            
            if (autoRotate && molecule) {
                molecule.rotation.y += 0.005;
            }
            
            renderer.render(scene, camera);
        }
        
        // Start the simulation
        window.onload = init;
    </script>
</body>
</html>
